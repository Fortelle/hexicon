!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hexicon=e():t.Hexicon=e()}(self,(()=>(()=>{"use strict";var t={d:(e,o)=>{for(var s in o)t.o(o,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:o[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>f});const o=t=>{let e=2166136261;for(let o of t)e=4294967295&(e^o),e=16777619*e&4294967295;return e},s=t=>{let e=[...t].map((t=>t.charCodeAt(0)));return o(e)};const r=class{constructor(t={}){var e;this.seed=t.seed?4294967295&t.seed:t.string?s(t.string):t.bytes?(e=t.bytes,o(e)):t.hex?(t=>{(t=t.replace(/[^A-Fa-f0-9]/g,"").replace(/^0+/,"")).length%2!=0&&(t="0"+t);let e=t.matchAll(/../g).map((t=>parseInt(t[0],16))).reverse();return o(e)})(t.hex):s(Math.random().toString()),this.reset()}reset(){this.sample=this.seed}next(){let t=this.sample;return t^=t<<13&4294967295,t^=t>>17&4294967295,t^=t<<5&4294967295,this.sample=t,t}nextBool(){return this.next()>0}nextFloat(){return this.next()/4294967296}};const i=class{constructor(t={}){let e=document.createElement("svg");for(let[o,s]of Object.entries(t))e.setAttribute(o,s);this.element=e}add(t,e){let o=document.createElement(t);for(let[t,s]of Object.entries(e))o.setAttribute(t,s);this.element.append(o)}toString(){return this.element.outerHTML}};const n=class{constructor(t,e){this.options={size:512,threshold:.5,...e??{},...t??{}},this.randomizer=new r(t.random)}createSVG(){let t=~~this.options.size,e=new i({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:t,height:t,preserveAspectRatio:"xMinYMin",viewBox:`0 0 ${t} ${t}`,"data-seed":this.randomizer.seed}),o=this.getTileData();return this.options.background&&e.add("rect",{width:"100%",height:"100%",fill:this.options.background}),this.paintSVG(e,o),e}getColor(){let t=this.options.color;switch(t){case void 0:case"normal":case"light":case"dark":return this.randomizer.reset(),`hsl(${360*this.randomizer.nextFloat()},${60+20*this.randomizer.nextFloat()}%,${"light"==t?60+20*this.randomizer.nextFloat():"dark"==t?40-20*this.randomizer.nextFloat():40+20*this.randomizer.nextFloat()}%)`;default:return t}}getBool(){return this.randomizer.next()<4294967295*this.threshold}getBools(t){let e=[...Array(t)].map((t=>this.randomizer.nextBool())),o=Math.ceil((this.options.minimum??0)*t);if(o>0){let t=e.map(((t,e)=>t?-1:e)).filter((t=>t>=0)),s=o-(e.length-t.length);if(s>0){t=t.sort((()=>this.randomizer.nextBool()?1:-1));for(let o=0;o<s;o++)e[t[o]]=!0}}return e}};class l extends n{static defaultOptions={level:5,symmetrical:!0};constructor(t){super(t,l.defaultOptions)}getTileData(){let t=~~this.options.size,e=~~this.options.level;if(e<=0)return;let o=this.options.symmetrical?Math.ceil(e/2):e,s=this.getBools(e*o),r=t/(e+1.236),i=(t-r*e)/2,n=i,l=this.getColor(),a=[];for(let t=0;t<e;t++){let h=t<o?t:e-1-t;for(let o=0;o<e;o++)s[h*e+o]&&a.push({x:i+t*r,y:n+o*r,size:r,color:l})}return a}paintSVG(t,e){t.element.setAttribute("shape-rendering","crispEdges");for(let o of e)t.add("rect",{x:o.x,y:o.y,width:o.size,height:o.size,fill:o.color})}}const a=l;class h extends n{static defaultOptions={level:4,symmetrical:!0};constructor(t){super(t,h.defaultOptions)}getTileData(){let t=~~this.options.size,e=~~this.options.level;if(e<=0)return;let o=~~this.options.spacing,s=!!this.options.symmetrical,r=!!this.options.rotated,i=!!this.options.bordered,n=t/2,l=n,a=Math.sqrt(3),h=t/(2*e)/2/a*2,c=1+3*e*(e-1),p=this.getColor(),d=this.getBools(c),f=[],u=[...Array(e)].map((()=>[])),m={},g=0;for(let t=1-e;t<e;t++)for(let o=1-e;o<e;o++){let s=-(t+o),r=(Math.abs(t)+Math.abs(o)+Math.abs(s))/2;r<e&&(u[r].push([t,o,s]),m[`${t},${o}`]=d[g++])}if(r)for(let t=0;t<u.length;t++){let e=i&&t==u.length-1;for(let[r,i,c]of u[t]){let t=s&&i<c?c:i;if(e||m[`${r},${t}`]){let t=n+a*h*(r/2+i),e=l+1.5*h*r,s=this.getVertex(t,e,h-o,-30);f.push({points:s,color:p})}}}else for(let t=0;t<u.length;t++){let e=i&&t==u.length-1;for(let[r,i,c]of u[t]){let t=s&&r<0?-r:r,d=s&&r<0?-1*c:i;if(e||m[`${t},${d}`]){let t=n+1.5*h*r,e=l+a*h*(r/2+i),s=this.getVertex(t,e,h-o,0);f.push({points:s,color:p})}}}return f}paintSVG(t,e){for(let o of e)t.add("polygon",{points:o.points.map((t=>`${t[0]},${t[1]}`)).join(" "),fill:o.color,stroke:o.color})}getVertex(t,e,o,s){return[...Array(6)].map(((r,i)=>[t+o*Math.cos((s+60*i)*Math.PI/180),e+o*Math.sin((s+60*i)*Math.PI/180)]))}draw(t){return this.options.rotated?this.drawB(t):this.drawA(t)}}const c=h;class p extends n{static defaultOptions={level:6,sides:8,rotated:!1,symmetrical:!0,bordered:!1};constructor(t){super(t,p.defaultOptions)}getTileData(){let t=~~this.options.size,e=~~this.options.level,o=~~this.options.sides,s=!!this.options.symmetrical,r=!!this.options.rotated,i=!!this.options.bordered;if(o<3)return;let n=t/2,l=n,a=t/(2*e+1.236),h=.8*a,c=360/o,p=r?.5*c:0,d=this.getColor(),f=t=>new Array(o).fill().map(((e,o)=>[n+t*Math.cos((-p-90+o*c)*Math.PI/180),l+t*Math.sin((-p-90+o*c)*Math.PI/180)])),u=(o>>1)+o%2+(r&&o%2==0?1:0),m=1+(e-1)*(s?u:o),g=this.getBools(m),x=[];for(let t=1;t<=e;t++)if(1==t&&(g[0]||i)){let t=f(h);x.push({points:t,color:d})}else{let n=f((t-1)*a),l=f((t-1)*a+h);for(let a=0;a<o;a++){let h=s?1+(t-2)*u+(a<u?a:o%2==0?2*u-a-(r?2:1):2*u-a-(r?1:2)):1+(t-2)*o+a;if(i&&t==e||g[h]){let t=[n[a],n[a==o-1?0:a+1],l[a==o-1?0:a+1],l[a]];x.push({points:t,color:d})}}}return x}paintSVG(t,e){for(let o of e)t.add("polygon",{points:o.points.map((t=>`${t[0]},${t[1]}`)).join(" "),fill:o.color,stroke:o.color})}}const d={square:a,hexagon:c,concentration:p};const f=class{static types=d;constructor(t){let e=d[t.type];this.generator=new e(t)}toSVG(t=!1){let e=this.generator.createSVG().toString();return t&&(e='<?xml version="1.0" encoding="utf-8"?>\n'+e),e}};return e=e.default})()));